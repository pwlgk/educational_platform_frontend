// src/components/notifications/NotificationsBadge.vue
<template>
  <button class="notification-badge-button" @click="goToNotifications">
    <span class="icon">üîî</span> <!-- –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É -->
    <span v-if="unreadCount > 0" class="badge">{{ badgeCount }}</span>
  </button>
</template>

<script setup lang="ts">
import { computed } from 'vue';
import { useNotificationsStore } from '@/store/notifications.store';
import { useRouter } from 'vue-router';

const notificationsStore = useNotificationsStore();
const router = useRouter();

// –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–µ—Ç—Ç–µ—Ä –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞
const unreadCount = computed(() => notificationsStore.getUnreadCount);

// –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 99+)
const badgeCount = computed(() => {
  return unreadCount.value > 99 ? '99+' : unreadCount.value;
});

const goToNotifications = () => {
    // TODO: –ó–∞–º–µ–Ω–∏—Ç–µ 'NotificationsPage' –Ω–∞ –∏–º—è –≤–∞—à–µ–≥–æ —Ä–æ—É—Ç–∞ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    router.push({ name: 'NotificationsPage' });
}
</script>

<style scoped>
.notification-badge-button {
  position: relative;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  margin: 0 0.5rem; /* –û—Ç—Å—Ç—É–ø—ã –ø–æ –±–æ–∫–∞–º */
  color: inherit; /* –ù–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
}
.icon {
  font-size: 1.5rem; /* –†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ */
}
.badge {
  position: absolute;
  top: 0;
  right: 0;
  background-color: red;
  color: white;
  border-radius: 50%;
  padding: 0.1em 0.4em;
  font-size: 0.75rem;
  font-weight: bold;
  min-width: 1.2em; /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –æ–¥–Ω–æ–π —Ü–∏—Ñ—Ä—ã */
  height: 1.2em;
  line-height: 1.2em; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
  text-align: center;
  transform: translate(40%, -40%); /* –°–¥–≤–∏–≥–∞–µ–º –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è */
}
</style>